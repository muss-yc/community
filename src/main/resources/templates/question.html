<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{commonCode::common_head('问题详情-慕斯社区')}">
    <title></title>
</head>
<body>
<!-- 导航栏 -->
<div th:replace="commonCode::common_navigation"></div>
<!-- 主体 -->
<div class="container-fluid main">
    <div class="row">
        <!-- 左侧问题 -->
        <div class="col-lg-9 col-md-12 col-xs-12 col-sm-12 " style="padding-left: 50px;padding-bottom: 30px">
            <!-- 问题主体 -->
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 ">
                <h3><span aria-hidden="true" th:text="${questionDTO.question.title}"> 我关注的问题</span></h3>
                <h4 class="text-desc">
                    作者 <a th:href="@{/}" th:text="${questionDTO.user.name}"></a>
                    | 发布时间于[[${#dates.format(questionDTO.question.gmtCreate,'yyyy年MM月dd日')}]]
                    | 阅读数：[[${questionDTO.question.viewCount}]]
                </h4>
                <hr>
                <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 " th:text="${questionDTO.question.description}"></div>
                <br>
                <hr>
                <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 ">
                    <span class="label label-info" th:each="tag : ${#strings.arraySplit(questionDTO.question.tag,',')}" style="margin-right: 5px">
                        <span class="glyphicon glyphicon-tags" style="margin-right: 3px"></span>
                        <span th:text="${tag}" ></span>
                    </span>
                    <hr>
                </div>

                <a th:href="@{/publish/{id}(id=${questionDTO.question.id})}" th:if="${session.user != null && session.user.id == questionDTO.user.id}">
                    <span class="glyphicon glyphicon-pencil text-desc mouse-hover" style="font-size: 14px">编辑</span>
                </a>
                <hr>
            </div>

            <!-- 回复列表 -->
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 ">
                <h4><span th:text="${questionDTO.question.commentCount}"></span> 个回复</h4>
                <div th:each="commentVO : ${commentVOList}" style="margin-bottom: 20px;border-bottom: 1px #2ecfc8 solid">
                    <img class="img-circle" th:src="${commentVO.user.avatarUrl}" alt="" src="" width="30px" height="30px">
                    &nbsp<span th:text="${commentVO.user.name}" style="font-size: 18px"></span>
                    <h4 style="margin-left: 40px;margin-top: 0;color: #a2a7ad" th:text="${commentVO.comment.content}">asd</h4>
                    <div style="font-size: 19px;margin-right: 15px;" >
                        <a href="#" class="comment-a"><span class="glyphicon glyphicon-thumbs-up" style="margin-left: 40px;"></span></a>
                        <a href="#" class="comment-a"><span class="glyphicon glyphicon-comment" th:data-id="${commentVO.comment.id}" onclick="collapseComments(this)">
                            <span style="color: #c0c3c6" th:text="${commentVO.comment.commentCount}"></span>
                        </span></a>

                        <span class="pull-right text-desc" th:text="${#dates.format(commentVO.comment.gmtCreate,'yyyy年MM月dd日')}"></span>
                        <!-- 二级回复 -->
                        <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 collapse"
                             th:id="${'comment-'+commentVO.comment.id}"
                             style="border: 1px #e0cfcf solid;
                                    border-radius: 15px;
                                    margin-left: 40px;
                                    margin-bottom: 20px;
                                    padding: 10px;
                                    background-color:#f3fafa">


                            <div style="margin: 10px 0 10px 0" class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                                <input type="text" class="form-control" placeholder="回复一下..." th:id="${'input-'+commentVO.comment.id}">
                                <button type="button" class="btn  btn-success pull-right" style="margin-top: 10px" onclick="comment(this)" th:data-id="${commentVO.comment.id}">回复</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 提交回复 -->
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 " id="comment_section">
                <h4>问题回复 <span class="glyphicon glyphicon-send"></span></h4>
                <img class="img-circle" th:src="${questionDTO.user.avatarUrl}" alt="" src="" width="30px" height="30px">
                &nbsp;<span th:text="${questionDTO.user.name}" style="font-size: 18px"></span>
                <input type="hidden" id="question_id" th:value="${questionDTO.question.id}">
                <input type="hidden" id="user_id" th:value="${questionDTO.user.id}">
                <textarea class="form-control" rows="6" style="margin: 10px 0" id="comment_content"></textarea>
                <button type="button" class="btn btn-success" style="float:right;" onclick="post()">回复</button>
            </div>

        </div>
        <!-- 右侧列表 -->
        <div class="col-lg-3 col-md-12 col-xs-12 col-sm-12" style="margin-top: 20px;border-left:1px #d9c0c0 solid ">
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12" style="padding-left: 30px">
                <h4 style="color:#7ae0d2;">发起人</h4>
                <img class="img-circle" th:src="${questionDTO.user.avatarUrl}" alt="" src="" width="30px" height="30px">
                &nbsp;<span th:text="${questionDTO.user.name}" style="font-size: 18px"></span>
                <br>
            </div>
            <hr class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
            <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 " style="padding-left: 30px">
                <h4 style="color:#7ae0d2;">相关问题</h4>
                <div class="list-group" >
                    <a href="#" class="list-group-item a-hover"  th:each="relatedQuesiton : ${questionList}" th:text="${relatedQuesiton.title}"></a>
                </div>
            </div>
        </div>

    </div>
</div>
</body>
</html>